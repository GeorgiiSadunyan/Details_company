<mxfile host="Electron" agent="Mozilla/5.0 (Windows NT 10.0; Win64; x64) AppleWebKit/537.36 (KHTML, like Gecko) draw.io/29.0.3 Chrome/140.0.7339.249 Electron/38.7.0 Safari/537.36" version="29.0.3">
  <diagram name="Sequence Diagram - Add Supplier" id="sequence-add">
    <mxGraphModel dx="2135" dy="2403" grid="1" gridSize="10" guides="1" tooltips="1" connect="1" arrows="1" fold="1" page="1" pageScale="1" pageWidth="1600" pageHeight="1200" math="0" shadow="0">
      <root>
        <mxCell id="0" />
        <mxCell id="1" parent="0" />
        <mxCell id="user" value="Пользователь" style="shape=umlActor;verticalLabelPosition=bottom;verticalAlign=top;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="50" y="40" width="30" height="60" as="geometry" />
        </mxCell>
        <mxCell id="main-view" value="Главное окно&#xa;(View)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="150" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="add-view" value="Окно добавления&#xa;(Add View)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" vertex="1">
          <mxGeometry x="320" y="40" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="http-handler" value="HTTP Handler&#xa;(RequestHandler)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" vertex="1">
          <mxGeometry x="510" y="40" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="add-controller" value="AddSupplierController" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="700" y="40" width="160" height="60" as="geometry" />
        </mxCell>
        <mxCell id="observable-repo" value="SupplierRepObservable&#xa;(Subject)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" vertex="1">
          <mxGeometry x="910" y="40" width="170" height="60" as="geometry" />
        </mxCell>
        <mxCell id="repository" value="Supplier_rep_DB&#xa;(Repository)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" vertex="1">
          <mxGeometry x="1130" y="40" width="140" height="60" as="geometry" />
        </mxCell>
        <mxCell id="observer" value="ViewObserver&#xa;(Observer)" style="rounded=1;whiteSpace=wrap;html=1;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" vertex="1">
          <mxGeometry x="1320" y="40" width="120" height="60" as="geometry" />
        </mxCell>
        <mxCell id="lifeline-user" value="" style="dashed=1;dashPattern=1 2;strokeWidth=2;html=1;strokeColor=#999;" parent="1" vertex="1">
          <mxGeometry x="64.5" y="100" width="1" height="1000" as="geometry" />
        </mxCell>
        <mxCell id="lifeline-main" value="" style="dashed=1;dashPattern=1 2;strokeWidth=2;html=1;strokeColor=#999;" parent="1" vertex="1">
          <mxGeometry x="209.5" y="100" width="1" height="1000" as="geometry" />
        </mxCell>
        <mxCell id="lifeline-add" value="" style="dashed=1;dashPattern=1 2;strokeWidth=2;html=1;strokeColor=#999;" parent="1" vertex="1">
          <mxGeometry x="389.5" y="100" width="1" height="1000" as="geometry" />
        </mxCell>
        <mxCell id="lifeline-http" value="" style="dashed=1;dashPattern=1 2;strokeWidth=2;html=1;strokeColor=#999;" parent="1" vertex="1">
          <mxGeometry x="579.5" y="100" width="1" height="1000" as="geometry" />
        </mxCell>
        <mxCell id="lifeline-addctrl" value="" style="dashed=1;dashPattern=1 2;strokeWidth=2;html=1;strokeColor=#999;" parent="1" vertex="1">
          <mxGeometry x="779.5" y="100" width="1" height="1000" as="geometry" />
        </mxCell>
        <mxCell id="lifeline-observable" value="" style="dashed=1;dashPattern=1 2;strokeWidth=2;html=1;strokeColor=#999;" parent="1" vertex="1">
          <mxGeometry x="994.5" y="100" width="1" height="1000" as="geometry" />
        </mxCell>
        <mxCell id="lifeline-repo" value="" style="dashed=1;dashPattern=1 2;strokeWidth=2;html=1;strokeColor=#999;" parent="1" vertex="1">
          <mxGeometry x="1199.5" y="100" width="1" height="1000" as="geometry" />
        </mxCell>
        <mxCell id="lifeline-observer" value="" style="dashed=1;dashPattern=1 2;strokeWidth=2;html=1;strokeColor=#999;" parent="1" vertex="1">
          <mxGeometry x="1379.5" y="100" width="1" height="1000" as="geometry" />
        </mxCell>
        <mxCell id="msg1" value="1: Клик &#39;Добавить поставщика&#39;" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;rounded=0;strokeWidth=2;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="65" y="140" as="sourcePoint" />
            <mxPoint x="210" y="140" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg2" value="2: window.open(&#39;/add_supplier&#39;)" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;rounded=0;strokeWidth=2;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="210" y="180" as="sourcePoint" />
            <mxPoint x="390" y="180" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="create-window" value="&lt;&lt;create&gt;&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="260" y="155" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="msg3" value="3: GET /add_supplier" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;rounded=0;strokeWidth=2;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="390" y="220" as="sourcePoint" />
            <mxPoint x="580" y="220" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg4" value="4: add_supplier.html" style="endArrow=open;endFill=0;dashed=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;rounded=0;strokeWidth=2;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="580" y="250" as="sourcePoint" />
            <mxPoint x="390" y="250" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg5" value="5: Показать форму" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;rounded=0;strokeWidth=2;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="390" y="290" as="sourcePoint" />
            <mxPoint x="65" y="290" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg6" value="6: Заполнение данных" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;rounded=0;strokeWidth=2;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="65" y="330" as="sourcePoint" />
            <mxPoint x="390" y="330" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg7" value="7: Клик &#39;Добавить&#39;" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;rounded=0;strokeWidth=2;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="65" y="370" as="sourcePoint" />
            <mxPoint x="390" y="370" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="self1" value="8: Валидация&#xa;на клиенте" style="html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;edgeStyle=orthogonalEdgeStyle;strokeWidth=2;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="390" y="400" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="450" y="400" />
              <mxPoint x="450" y="430" />
            </Array>
            <mxPoint x="390" y="430" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg9" value="9: POST /api/suppliers/add&#xa;{name, phone, address}" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;rounded=0;strokeWidth=2;fillColor=#e1d5e7;strokeColor=#9673a6;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="389.5" y="480" as="sourcePoint" />
            <mxPoint x="579.5" y="480" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg10" value="10: validate_and_add_supplier()" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;rounded=0;strokeWidth=2;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="580" y="510" as="sourcePoint" />
            <mxPoint x="780" y="510" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="self2" value="11: Валидация&#xa;полей" style="html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;edgeStyle=orthogonalEdgeStyle;strokeWidth=2;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="780" y="540" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="840" y="540" />
              <mxPoint x="840" y="570" />
            </Array>
            <mxPoint x="780" y="570" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="self3" value="12: Создать&#xa;Supplier()" style="html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;edgeStyle=orthogonalEdgeStyle;strokeWidth=2;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="780" y="600" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="840" y="600" />
              <mxPoint x="840" y="630" />
            </Array>
            <mxPoint x="780" y="630" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg13" value="13: add(supplier)" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;rounded=0;strokeWidth=2;fillColor=#fff2cc;strokeColor=#d6b656;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="780" y="670" as="sourcePoint" />
            <mxPoint x="995" y="670" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg14" value="14: add(supplier)" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;rounded=0;strokeWidth=2;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="995" y="710" as="sourcePoint" />
            <mxPoint x="1200" y="710" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="self4" value="15: INSERT INTO&#xa;suppliers" style="html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;edgeStyle=orthogonalEdgeStyle;strokeWidth=2;fillColor=#ffe6cc;strokeColor=#d79b00;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="1200" y="740" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="1280" y="740" />
              <mxPoint x="1280" y="770" />
            </Array>
            <mxPoint x="1200" y="770" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg16" value="16: success" style="endArrow=open;endFill=0;dashed=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;rounded=0;strokeWidth=2;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="1200" y="800" as="sourcePoint" />
            <mxPoint x="995" y="800" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg17" value="17: notify(&#39;item_added&#39;, supplier)" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;rounded=0;strokeWidth=2;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="995" y="840" as="sourcePoint" />
            <mxPoint x="1380" y="840" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg18" value="18: update(&#39;item_added&#39;, data)" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;rounded=0;strokeWidth=2;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="995" y="880" as="sourcePoint" />
            <mxPoint x="1380" y="880" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="self5" value="19: Логирование&#xa;события" style="html=1;align=left;spacingLeft=2;endArrow=block;rounded=0;edgeStyle=orthogonalEdgeStyle;strokeWidth=2;fillColor=#dae8fc;strokeColor=#6c8ebf;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="1380" y="910" as="sourcePoint" />
            <Array as="points">
              <mxPoint x="1440" y="910" />
              <mxPoint x="1440" y="940" />
            </Array>
            <mxPoint x="1380" y="940" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg20" value="20: success" style="endArrow=open;endFill=0;dashed=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;rounded=0;strokeWidth=2;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="995" y="970" as="sourcePoint" />
            <mxPoint x="780" y="970" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg21" value="21: {success: true, supplier_id}" style="endArrow=open;endFill=0;dashed=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;rounded=0;strokeWidth=2;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="780" y="1000" as="sourcePoint" />
            <mxPoint x="580" y="1000" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg22" value="22: HTTP 200 + JSON" style="endArrow=open;endFill=0;dashed=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;rounded=0;strokeWidth=2;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="580" y="1030" as="sourcePoint" />
            <mxPoint x="390" y="1030" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg23" value="23: Показать сообщение об успехе" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;rounded=0;strokeWidth=2;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="390" y="1060" as="sourcePoint" />
            <mxPoint x="65" y="1060" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg24" value="24: postMessage(&#39;supplier_added&#39;)" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;rounded=0;strokeWidth=2;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="390" y="1100" as="sourcePoint" />
            <mxPoint x="210" y="1100" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg25" value="25: loadSuppliers(currentPage)" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;rounded=0;strokeWidth=2;fillColor=#d5e8d4;strokeColor=#82b366;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="210" y="1140" as="sourcePoint" />
            <mxPoint x="580" y="1140" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="msg26" value="26: window.close()" style="endArrow=block;endFill=1;html=1;edgeStyle=orthogonalEdgeStyle;align=left;verticalAlign=bottom;rounded=0;strokeWidth=2;dashed=1;" parent="1" edge="1">
          <mxGeometry x="0.1" y="10" relative="1" as="geometry">
            <mxPoint x="390" y="1180" as="sourcePoint" />
            <mxPoint x="390" y="1220" as="targetPoint" />
            <mxPoint as="offset" />
          </mxGeometry>
        </mxCell>
        <mxCell id="destroy" value="&lt;&lt;destroy&gt;&gt;" style="text;html=1;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontStyle=2" parent="1" vertex="1">
          <mxGeometry x="395" y="1195" width="80" height="20" as="geometry" />
        </mxCell>
        <mxCell id="title" value="Диаграмма последовательности: Добавление поставщика" style="text;html=1;strokeColor=none;fillColor=none;align=center;verticalAlign=middle;whiteSpace=wrap;rounded=0;fontSize=18;fontStyle=1" parent="1" vertex="1">
          <mxGeometry x="500" y="5" width="500" height="30" as="geometry" />
        </mxCell>
        <mxCell id="note1" value="Паттерн MVC:&#xa;• Новое окно имеет свой View&#xa;• Отдельный контроллер (AddSupplierController)&#xa;• Общая модель (Repository)&#xa;&#xa;Паттерн Observer:&#xa;• Observable уведомляет всех наблюдателей&#xa;• ViewObserver логирует событие добавления&#xa;&#xa;Валидация:&#xa;• На клиенте (формат, обязательные поля)&#xa;• На сервере (бизнес-правила, уникальность)" style="shape=note;whiteSpace=wrap;html=1;backgroundOutline=1;darkOpacity=0.05;size=15;fillColor=#fff2cc;strokeColor=#d6b656;align=left;" parent="1" vertex="1">
          <mxGeometry x="50" y="1250" width="300" height="200" as="geometry" />
        </mxCell>
      </root>
    </mxGraphModel>
  </diagram>
</mxfile>
